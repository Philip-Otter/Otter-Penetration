# Automation
***
## SQLmap
***
### Attack Tuning
	Two parts to every payload
		Vector
			Carries the useful SQL code
		Boundaries
			Prefix and suffix that enxapsulates the vector
#### Level and Risk
- --level 
	- Defines the boundary and vector values to use
		- 1-5 options 
			- default of 1
		- Prioritizes most likely values first
- --risk
	- 1-3
		- default of 1
		- Control the risk for data loss or denial of service
#### Union SQLi Tuning
- --union-cols
	- Manually provide the number of columns
- --union-char
	- Manually set dummy value to be used by sqlmap
		- This can be useful where NULL and random integers don't play nice.
- --union-from
	- Used when From {table} appendix is required

### Evasion and Concealing
#### IP address concealing
- --proxy
- --proxy-file
	- provide a file containing a list of proxies
- --tor
	- --check-tor
		- Verify that things are working properly
		- Should get a "congratulations" message

#### Anti-CSRF Token Bypass
- --csrf-token
	- Set the token following the flag
#### WAF Bypass
	By default SQLmap sends a malicious looking payload as a test for the existance of a WAF
		If existence of a WAF is confirmed it will then try to identify the WAF
##### Useful Flags
- --skip-waf
	- Allows us to be stealthier by skipping the WAF checks
- --random-agent
	- Provides a random user agent in our request header
- --chunked
	- Splits POST request body in a way that helps blacklisted words slip by
##### Tamper Scripts
- ==Syntax:==  --tamper={script}
	- Separate scripts by commas
- --list-tamper
	- List all tampers
- 0eunion
	- Replaces UNIONs with e0UNION
- base64encode
- between
	- replaces > with NOT BETWEEN 0 and #
	- Replaces = with BETWEEN # AND #
- commalesslimeit
	- MySQL
		- Replaces instances like LIMIT M,N with LIMIT N OFFSET M
- equaltolike
- halfversionedkeywords
	- MySQL
		- Adds versioned comment before before each keyword
- modsecurityversioned
	- MySQL
		- embraces complete query with versioned comment
- modsecuirtyzeroversioned
	- MySQL
		- embraces complete query with zero-versioned comment
- percentage
	- Adds a percentage sign in front of each character
- plus2concat
	- msSQL
		- Replaces + with CONCAT()
- randomcase
	- Replaces each keyword character with a random case
- space2comment
- space2dash
- space2hash
- space2mssqlblank
- space2plus
- space2randomblank
- symboliclogic
	- Replace AND and OR with && and ||
- versionedkeywords
	- MySQL
		- Encloses each non-function keyword with versioned comment
- versionendmorekeywords
#### Value Bypass
##### Calculated Value Bypass
- --eval
	- follow with python code for hashing or encoding our values
##### Unique Value Bypass
- --randomize
	- Should be used pointing to parameter name containing the value that needs to be randomized

### Exploitation Flags
- --is-dba
	- Check for db administrator privilages
- --file-read {fileName}
	- Read files on db host
- --file-write {fileName} --filedestination {remoteFilePath}
	- write local files to remote db host computer
- --os-shell
	- Give us an OS shell on the db host computer
### Database Enumeration
#### Useful Flags
- --banner
	- Get the version banner
- --current-user
- --current-db
- -D
	- Specify db
		- --tables
			- Enumerate tables
- -C {options}
	- Specify the table columns that we want
- --start/--stop
	- Specify rows by number
- --exclude-sysdbs
	- Gets rid of the system db junk we generally don't care about
- --schema
	- Retrieve the db architecture 
- --search 
	- Can search for:
		- dbs
			- -D
		- tables
			- -T
		- columns
			- -C
- --passwords
	- Dump contents of system tables containing database-specific credentials
#### Conditional retrieval
- --where
	- --where=`"Name Like 'J%'"`
		- Just an example. Would return all names that start with the letter J
### Technique Characters
- B
	- Boolean-Based Blind
- Error-Based
	- Union Query-Based
- Stacked Queries
- T
	- Time-Based  Blind
- Q
	- Inline Queries 


### Help Menus
- -h
	- Basic help
- -hh
	- All options and help
- Official wiki also has the full manual 

### Useful Flags
- -u
	- provide the target URL
- --batch
	- Skips any required user input by automatically choosing the default option
- -r
	- Provide SQL map with a request file
		- contains http request
- --cookie
	- Specify cookie
- -H
	- enter a header value
	- Headers can be tested use `*` to indicate where to test
- --Host
	- set host
- --referrer
	- set referrer
- -A / --user-agent
	- specify the user agent to work
- --random-agent
	- randomly selects a user agent
- --mobile
	- Imitate a smartphone
- --data
	- POST request
	- Also defines POST data
- --method
	- Specify http method
- --dump-all
	- Grab all database information
- --dump
	- Grab just the goodies 
- --parse-errors
	- Includes DBMS errors in the output
- -t 
	- Store the whole contents of the traffic to an output file
- -T
	- Specify the table name to dump
- --prefix and --suffix
	- Used to manually set the prefix and suffix
- --title
	- Used for title comparison during an attack
- --string
	- success string that would be present in the response.
	- Similar to Hydra
- --text-only
	- Use when there is a lot of hidden content on the pages
	- Removes all the HTML tags and bases the comparison solely on text
- --technique
	- Specify the SQLi technique to be used
- --no-cast
	- Turn off payload casting
- --flush-session
	- Remove old SQLmap session data

### Useful Auxiliary Commands
- Reading Dumped DBs
	- ==Command:==  Column -s, -t < {file}.csv | less
		- Can be kinda janky
		- Often better to just query data through sqlmap itself after all the data has been dumped to local files
# Types Of SQL Injections
***
## Boolean-Based BlindSQL Injections
***
	Retrieves 1 byte of information per request
	True or False is determined through server responses
	Most common SQLi in web applications
## Error-Based SQLi
***
	Uses DBMS errors to carry query results
	Can get 200 bytes of information per request
## Union Query Based SQLi
***
	Extends another query
	Fastest SQLi
		In the right scenario it can pull the whole contest of a database with a single request
## Stacked Queries
***
	Piggybacks off of the vulnerable query 
		Can be used to run OS commands and retrive data 
## Time Based SQLi
***
	Boolean values based on response times
	Slower than boolean based blind
## Inline Queries
***
	Embeds a query inside of another query
	Uncommon
## Out Of Band SQLi
***
	Runs on the DNS Server
		Requests non-existent subdomains to form the SQL response